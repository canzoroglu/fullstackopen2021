(this.webpackJsonptestapp=this.webpackJsonptestapp||[]).push([[0],{21:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),o=t(16),a=t.n(o),u=(t(21),t(7)),i=t(3),s=t(0),d=function(e){var n=e.filter,t=e.filterChange;return Object(s.jsxs)("div",{children:["filter: ",Object(s.jsx)("input",{onChange:t,value:n})]})},l=function(e){var n=e.addNew,t=e.changeName,r=e.changePhone,c=e.newName,o=e.newPhone;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Add a new"}),Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{onChange:t,value:c})]}),Object(s.jsxs)("div",{children:["phone: ",Object(s.jsx)("input",{onChange:r,value:o})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})]})},j=function(e){var n=e.persons,t=e.filter,r=e.deletePerson;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Numbers"}),n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return Object(s.jsxs)("p",{children:[e.name," ",e.number,Object(s.jsx)("button",{onClick:function(){return r(e.id,e.name)},children:"Delete"})]},e.name)}))]})},f=function(e){var n,t=e.msg;return null===t?"":(n={color:t.includes("Error")?"red":""},Object(s.jsx)("div",{className:"added",style:n,children:t}))},b=t(4),h=t.n(b),m="/api/persons",O={getPeople:function(){return h.a.get(m).then((function(e){return e.data.concat({id:1e4,name:"Virus",number:"0000000"})}))},createPerson:function(e){return h.a.post(m,e).then((function(e){return e.data}))},updatePerson:function(e,n){return h.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return h.a.delete("".concat(m,"/").concat(e))}},p=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),a=Object(i.a)(o,2),b=a[0],h=a[1],m=Object(r.useState)(""),p=Object(i.a)(m,2),v=p[0],w=p[1],x=Object(r.useState)(""),g=Object(i.a)(x,2),P=g[0],C=g[1],N=Object(r.useState)(null),L=Object(i.a)(N,2),S=L[0],E=L[1];Object(r.useEffect)((function(){return O.getPeople().then((function(e){c(e)}))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(f,{msg:S}),Object(s.jsx)(d,{filter:P,filterChange:function(e){return C(e.target.value.toLowerCase())}}),Object(s.jsx)(l,{addNew:function(e){e.preventDefault();var n=t.filter((function(e){return e.name.toLowerCase()===b.toLocaleLowerCase()}));if(n.length>0)window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))&&O.updatePerson(n[0].id,Object(u.a)(Object(u.a)({},n[0]),{},{number:v})).then((function(e){c(t.map((function(n){return n.name.toLowerCase()===b.toLowerCase()?e:n}))),E("".concat(b," is updated with a new number")),setTimeout((function(){return E(null)}),5e3)})).catch((function(e){E("Error: ".concat(e.response.data.error)),setTimeout((function(){E(null)}),5e3)}));else{var r={name:b,number:v};O.createPerson(r).then((function(e){c(t.concat([e])),E("".concat(b," is added")),setTimeout((function(){return E(null)}),5e3)})).catch((function(e){E("Error: ".concat(e.response.data.error)),setTimeout((function(){E(null)}),5e3)}))}w(""),h("")},changeName:function(e){return h(e.target.value)},changePhone:function(e){return w(e.target.value)},newName:b,newPhone:v}),Object(s.jsx)(j,{persons:t,filter:P,deletePerson:function(e,n){window.confirm("Delete ".concat(n," ?"))&&O.deletePerson(e).then((function(){c(t.filter((function(n){return n.id!==e}))),E("".concat(n," is deleted")),setTimeout((function(){E(null)}),5e3)})).catch((function(t){E("Error: '".concat(n,"' was already removed from server")),setTimeout((function(){E(null)}),5e3),c((function(n){return n.filter((function(n){return n.id!==e}))}))}))}})]})};a.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(p,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.1a82443b.chunk.js.map